# 2강. 도커의 기본적인 사용법

### 1강 간단요약

일단 이책의 목표는 도커의 원리를 세세하게 배운다기보다는 도커를 활용하는 방법을 배우는거임.
도커 왜 쓰니?라고 물어본다면 적은 운영비와 강력한 이식성이라고 말할 수 있음. 도커는 로컬 호스트의 운영체제 위에 도커 프로그램을 돌리고 그 위에 컨테이너를 동작시키는 방식으로 작동함. 이게 VM이랑은 다른 이유는 VM은 하이퍼바이저 위에 VM이 돌아가고 그 위에 각각 가상 운영체제가 돌아가기때문에 메모리를 많이 먹었음. 도커는 VM보다 훨씬 많이 돌릴 수 있으면서도 어떤 환경에서도 돌아가니까 이식성이 아주 강력한게 특징임. 도커는 도커 엔진이라고 불리는 녀석이 로컬 OS와 통신하면서 컨테이너 관리 및 도커 API에 대한 응답을 함. 도커 API는 우리가 도커와 이야기할 수 있는 유일한 창구라고 생각하면 됨. 여러가지 방법이 있는데 우리는 주로 docker CLI 커맨드라인을 활용할거임. 도커는 로컬 OS를 통해서 로컬 디바이스의 자원을 공유한다고 생각하면 됨. 컨테이너는 실행되는 동안 로컬 머신의 메모리를 먹고 실행 안될때는 메모리는 안먹지만 디스크를 일부 차지하고 있음. 왜냐면 컨테이너도 파일 시스템을 가지기 때문임. 그리고 뒤에 —publish 명령어 통해서 로컬 포트랑 바인딩해주는 방법을 배우는데 이거 원리가 재미있음. 일단 도커 컨테이너도 가상 ip주소를 가지긴 하는데 이건 컨테이너 내에서 소통하기 위한거지 외부 공개ip가 아님. 그러면 도커 컨테이너랑은 어떻게 통신하나요? 간단히 말하면 도커가 호스트의 네트워크 트래픽을 보다가 연결된 포트로 들어오는게 있으면 가로채서 컨테이너한테 전달해주는 방식으로 작동함. 컨테이너에서 보낼때는 반대로 작동하겠지?

### 2강 간단요약

2강은 아주 간단하게 컨테이너를 내려받고 실행하는 여러 명령어를 연습해봤음.

```docker
# 항상 알아두어야 하는 명령어
# 컨테이너로 할 수 있는 모든걸 다 보여줌
docker container --hep

# 명령별로 자세히 보고 싶을때는 이런식으로 활용하면 됨
# 한번 써봤는데 설명도 아주 좋고 보기 편함. 자주 활용합시다
docker container rm --help

# 도커 컨테이너 실행하기
# 이미지가 없으면 자동으로 도커허브에서 다운받아줌
docker conatiner run [image]
# 자주 같이 사용하는 옵션들,
docker container run --detach --interactive --tty --publish 8080:80
# 줄여서 아래와 같이 사용할 수도 있음
# 그리고 container 명령어는 생략해도 되는 경우가 많은거 같음
# -d 는 백그라운드에서 안죽고 돌아가도록 해주는 옵션
# -it 는 도커 컨테이너에 접속해서 터미널로 컨테이너를 조작하겠다는 의미
# -p 는 호스트의 포트와 도커 컨테이너의 포트를 연결해주는 옵션
docker run -d -it -p 8080:80

# 실행중인 컨테이너 목록 보기
docker container ls
# 동일한 의미
docker ps
# 자주 같이 쓰는 옵션들
# -a --all 현재 실행중이 아닌 컨테이너들도 모두 보여줌
# -q --quiet 간단하게 컨테이너 아이디만 보여줌
docker container ls --all --quiet
docker container ls -a -q

# 컨테이너 실행 중지하기
# [container]에는 컨테이너 아이디 일부 넣어주면 됨
docker container rm [container]
# 자주 같이 사용하는 옵션
# -f --force 현재 실행중인 컨테이너라도 그냥 없애버림
docker container rm [conatiner] -f
# 현재 실행중인 모든 컨테이너 삭제하기
# 이게 되게 유용한데 $(~~) 명령을 통해서 해당 명령의 출력 결과를 바로 인자로 넣어줄 수 있음
docker container rm -f $(docker container ls -a -q)

# 로컬 <-> 컨테이너 파일 복사하기
# 이건 실습하면서 사용해본건데 엄청 유용함
# 컨테이너 -> 로컬 호스트로 옮길때
docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH
# 로컬 호스트 -> 컨테이너로 옮길때
docker cp [OPTIONS] SRC_PATH CONTAINER:DEST_PATH
```

### 실습

실습내용은 컨테이너에 올라가 있는 웹서버의 index.html을 수정하는 거였음.
docker cp 명령어를 통해 어렵지 않게 구현할 수 있음
